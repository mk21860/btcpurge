var BTCE = require('../btc-e');
var fs = require('fs');
//var SocksProxyAgent = require('socks-proxy-agent');
//var proxy = 'socks://127.0.0.1:9050';
//var agent = new SocksProxyAgent(proxy, false);
var Agent = require('agentkeepalive').HttpsAgent;
var agent = new Agent({
  maxSockets: 10,
  maxFreeSockets: 10,
  keepAlive: true,
  keepAliveMsecs: 30000
});
var currentNonce = fs.existsSync("nonce.json") ? JSON.parse(fs.readFileSync("nonce.json")) : 0;
var btce = new BTCE('V5LL5TH3-GG5DRVDA-57Z212CH-I1NQKEOC-IQXH3A7D', '49410f74d4b9725f916e8143013f20049cfe26e0817aa1e5c5a01a1dc44a551c', {
  agent: agent,
  nonce: function() {
    currentNonce++;
    fs.writeFile("nonce.json", currentNonce);
    return currentNonce;
  }
});

btce.ticker("ltc_btc", function (err, data) {
  console.log("data", err, data);
});

btce.ticker("ppc_btc", function (err, data) {
  console.log("data", err, data);
});
